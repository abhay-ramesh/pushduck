---
title: Client API
description: Client-side APIs for file uploads including React hooks and property-based client access with built-in state management and progress tracking
---

import { Card, Cards } from "fumadocs-ui/components/card";
import { Callout } from "fumadocs-ui/components/callout";

## Client API Overview

Pushduck provides two powerful client-side approaches for handling file uploads: **useUploadRoute hook** for reactive state management and **Property-Based Client** for enhanced type safety and modern developer experience.

## Available Client APIs

Pushduck provides powerful React hooks for handling file uploads with reactive state management, progress tracking, and seamless integration with your components.

<Callout type="info">
  **Choose Your Hook**: Use `useUpload` for basic uploads or `useUploadRoute` when you need route-specific validation and enhanced type safety.
</Callout>

## Available APIs

<Cards>
  <Card 
    title="createUploadClient (Property-Based)" 
    description="Modern property-based client with enhanced type safety and developer experience"
    href="/docs/api/client/create-upload-client"
  >
    - Enhanced type safety with IntelliSense
    - Property-based access (`client.imageUpload()` returns hook)
    - Built-in progress tracking and error handling
    - Modern developer experience
    
    **Perfect for**: New projects, enhanced type safety, modern React patterns
  </Card>
  <Card 
    title="useUpload" 
    description="Core upload hook with progress tracking and reactive state management"
    href="/docs/api/client/use-upload"
  >
    - File upload with progress tracking
    - Reactive state management
    - Error handling and retry logic
    - Flexible configuration options
    
    **Perfect for**: Basic file uploads, simple UI components
  </Card>
  
  <Card 
    title="useUploadRoute" 
    description="Route-specific uploads with enhanced validation and type safety"
    href="/docs/api/client/use-upload-route"
  >
    - Route-specific validation
    - Enhanced type inference
    - Multiple upload routes
    - Advanced configuration
    
    **Perfect for**: Complex applications, multiple upload types
  </Card>
</Cards>

## Quick Comparison

| Feature | `createUploadClient` | `useUploadRoute` |
|---------|---------------------|------------------|
| **Approach** | üîß Property-based | ‚öõÔ∏è React Hook |
| **Type Safety** | ‚úÖ Excellent (IntelliSense) | ‚úÖ Excellent |
| **Developer Experience** | ‚úÖ Modern | ‚úÖ Advanced |
| **Simplicity** | ‚úÖ Intuitive | ‚úÖ Straightforward |
| **Validation** | ‚úÖ Enhanced | ‚úÖ Advanced |
| **Multi-route** | ‚úÖ Multiple routes | ‚úÖ Single route per hook |
| **Progress Tracking** | ‚úÖ Built-in | ‚úÖ Built-in |
| **Error Handling** | ‚úÖ Enhanced | ‚úÖ Comprehensive |
| **Best For** | üÜï New projects, modern patterns | üîß All upload scenarios |

## Basic Usage Examples

### createUploadClient (Property-Based)

```typescript
import { createUploadClient } from 'pushduck/client';

const client = createUploadClient<AppRouter>({
  endpoint: '/api/upload',
});

function ModernUpload() {
  // Each route returns a hook with all upload functionality
  const { 
    uploadFiles, 
    files, 
    isUploading, 
    progress 
  } = client.imageUpload({
    onSuccess: (results) => console.log('Upload successful!', results),
    onError: (error) => console.error('Upload failed:', error),
  });
  
  const handleFileSelect = async (selectedFiles: File[]) => {
    await uploadFiles(selectedFiles);
  };
  
  return (
    <div>
      <input 
        type="file" 
        multiple
        onChange={(e) => e.target.files && handleFileSelect(Array.from(e.target.files))}
        disabled={isUploading}
      />
      {isUploading && <div>Progress: {progress}%</div>}
      <div>Uploaded: {files.filter(f => f.status === 'success').length} files</div>
    </div>
  );
}
```

### useUploadRoute Hook

```typescript
import { useUploadRoute } from 'pushduck/client';

function AdvancedUpload() {
  const { 
    uploadFiles, 
    files, 
    isUploading, 
    progress, 
    errors 
  } = useUploadRoute('imageUpload', {
    endpoint: '/api/upload',
    onSuccess: (results) => console.log('Upload successful!', results),
    onError: (error) => console.error('Upload failed:', error),
  });

  const handleFileSelect = async (selectedFiles: File[]) => {
    await uploadFiles(selectedFiles);
  };

  return (
    <div>
      <input 
        type="file" 
        multiple
        onChange={(e) => e.target.files && handleFileSelect(Array.from(e.target.files))}
        disabled={isUploading}
      />
      {isUploading && <div>Progress: {progress}%</div>}
      {errors.length > 0 && <div>Errors: {errors.join(', ')}</div>}
      <div>Uploaded files: {files.filter(f => f.status === 'success').length}</div>
    </div>
  );
  };

  return (
    <div>
      <input 
        type="file" 
        accept="image/*"
        onChange={(e) => handleImageUpload(e.target.files![0])} 
      />
      <input 
        type="file" 
        accept=".pdf,.doc,.docx"
        onChange={(e) => handleDocumentUpload(e.target.files![0])} 
      />
    </div>
  );
}
```

## Hook Features

### State Management

Both hooks provide reactive state management:

```typescript
const { 
  upload,     // Upload function
  uploading,  // Boolean: upload in progress
  progress,   // Number: upload progress (0-100)
  error,      // Error object if upload fails
  reset       // Function to reset state
} = useUpload(config);
```

### Progress Tracking

Real-time progress updates during file uploads:

```typescript
// Progress updates automatically during upload
{uploading && (
  <div className="progress-bar">
    <div 
      className="progress-fill" 
      style={{ width: `${progress}%` }}
    />
    <span>{progress}% uploaded</span>
  </div>
)}
```

### Error Handling

Comprehensive error handling with detailed messages:

```typescript
{error && (
  <div className="error-message">
    {error.code === 'FILE_TOO_LARGE' && 'File is too large'}
    {error.code === 'INVALID_FILE_TYPE' && 'Invalid file type'}
    {error.code === 'NETWORK_ERROR' && 'Network error, please retry'}
  </div>
)}
```

## Configuration Options

### Common Options

Both hooks support these configuration options:

```typescript
const config = {
  endpoint: '/api/upload',        // Upload endpoint
  headers: { Authorization: 'Bearer token' }, // Custom headers
  onProgress: (progress) => {},   // Progress callback
  onSuccess: (result) => {},      // Success callback
  onError: (error) => {},         // Error callback
  retries: 3,                     // Retry attempts
  retryDelay: 1000,              // Retry delay (ms)
};
```

### Hook-Specific Options

**useUpload** specific:
```typescript
{
  route: 'imageUpload',           // Single route name
  metadata: { userId: '123' },    // Upload metadata
}
```

**useUploadRoute** specific:
```typescript
{
  routes: ['imageUpload', 'documentUpload'], // Available routes
  defaultMetadata: { userId: '123' },        // Default metadata
}
```

## Best Practices

<Callout type="tip">
  **Performance**: Use `useUploadRoute` when you have multiple upload types in the same component. Use `useUpload` for simple, single-purpose upload components.
</Callout>

<Callout type="warn">
  **File Validation**: Always validate files on both client and server. Client validation provides immediate feedback, server validation ensures security.
</Callout>

<Callout type="info">
  **Error Recovery**: Implement retry logic for network errors and provide clear error messages to users for validation failures.
</Callout>

## Next Steps

1. **Basic uploads?** ‚Üí Start with [useUpload](/docs/api/hooks/use-upload)
2. **Multiple routes?** ‚Üí Use [useUploadRoute](/docs/api/hooks/use-upload-route)
3. **Enhanced client?** ‚Üí Try [createUploadClient](/docs/api/utilities/create-upload-client)
4. **Examples?** ‚Üí Check [complete examples](/docs/examples) 