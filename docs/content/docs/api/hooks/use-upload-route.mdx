---
title: useUploadRoute
description: React hook for uploading files with reactive state management
---

import { Callout } from "fumadocs-ui/components/callout";
import { TypeTable } from "fumadocs-ui/components/type-table";
import { Tab, Tabs } from "fumadocs-ui/components/tabs";

# useUploadRoute

A React hook that provides reactive state management for file uploads with progress tracking and error handling.

<Callout type="info">
  This hook follows familiar React patterns and is perfect for teams that prefer
  the traditional hook-based approach. Both this and `createUploadClient` are equally valid ways to handle uploads.
</Callout>

## When to Use This Hook

Use `useUploadRoute` when:

- ü™ù **Prefer React hooks** - familiar pattern for React developers
- üß© **Granular control** needed over individual upload state
- üîÑ **Component-level state** management preferred
- üë• **Team preference** for hook-based patterns

## Alternative Approach

You can also use the structured client approach:

```typescript
// Hook-based approach
import { useUploadRoute } from 'pushduck/client'

const { uploadFiles, files } = useUploadRoute<AppRouter>('imageUpload')
```

```typescript
// Structured client approach
import { createUploadClient } from 'pushduck/client'

const upload = createUploadClient<AppRouter>({
  endpoint: '/api/upload'
})

const { uploadFiles, files } = upload.imageUpload()
```

Both approaches provide the same functionality and type safety - choose what feels more natural for your team.

## Basic Usage

```typescript
import { useUploadRoute } from "pushduck/client";
import type { AppRouter } from "@/lib/upload";

export function ImageUploader() {
  // With type parameter (recommended for better type safety)
  const { uploadFiles, files, isUploading, error, reset } =
    useUploadRoute<AppRouter>("imageUpload");
    
  // Or without type parameter (still works)
  // const { uploadFiles, files, isUploading, error, reset } =
  //   useUploadRoute("imageUpload");

  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
    const selectedFiles = Array.from(e.target.files || []);
    uploadFiles(selectedFiles);
  };

  return (
    <div>
      <input
        type="file"
        multiple
        accept="image/*"
        onChange={handleFileSelect}
      />

      {files.map((file) => (
        <div key={file.id}>
          <span>{file.name}</span>
          <progress value={file.progress} max={100} />
          {file.status === "success" && <a href={file.url}>View</a>}
        </div>
      ))}

      {error && <div className="error">{error.message}</div>}
      <button onClick={reset}>Reset</button>
    </div>
  );
}
```

## Hook Signature

```typescript
// With type parameter (recommended)
function useUploadRoute<TRouter>(
  route: keyof TRouter,
  options?: UseUploadOptions
): UseUploadReturn;

// Without type parameter (also works)
function useUploadRoute(
  route: string,
  options?: UseUploadOptions
): UseUploadReturn;
```

## Parameters

<TypeTable
  type={{
    route: {
      description: "The upload route name from your router",
      type: "keyof TRouter | string",
      required: true,
    },
    options: {
      description: "Optional configuration for the hook",
      type: "UseUploadOptions",
    },
  }}
/>

### Type Parameter Benefits

```typescript
// ‚úÖ With type parameter - better type safety
const { uploadFiles } = useUploadRoute<AppRouter>("imageUpload");
// - Route names are validated at compile time
// - IntelliSense shows available routes
// - Typos caught during development

// ‚úÖ Without type parameter - still works
const { uploadFiles } = useUploadRoute("imageUpload");
// - Works with any string
// - Less type safety but more flexible
// - Good for dynamic route names
```

## Options

<TypeTable
  type={{
    onSuccess: {
      description: "Callback when uploads complete successfully",
      type: "(results: UploadResult[]) => void",
    },
    onError: {
      description: "Callback when upload fails",
      type: "(error: UploadError) => void",
    },
    onProgress: {
      description: "Callback for progress updates",
      type: "(progress: UploadProgress) => void",
    },
    disabled: {
      description: "Disable upload functionality",
      type: "boolean",
      default: "false",
    },
    autoUpload: {
      description: "Automatically upload files when added",
      type: "boolean",
      default: "true",
    },
  }}
/>

## Return Value

<TypeTable
  type={{
    uploadFiles: {
      description: "Function to upload files",
      type: "(files: File[]) => Promise<UploadResult[]>",
    },
    files: {
      description: "Array of files with upload status",
      type: "UploadFile[]",
    },
    isUploading: {
      description: "Whether any upload is in progress",
      type: "boolean",
    },
    uploadedFiles: {
      description: "Successfully uploaded files",
      type: "UploadResult[]",
    },
    error: {
      description: "Upload error if any",
      type: "UploadError | null",
    },
    reset: {
      description: "Reset upload state",
      type: "() => void",
    },
  }}
/>

## Advanced Examples

<Tabs items={["With Callbacks", "Multiple Files", "Form Integration"]}>
  <Tab value="With Callbacks">
    ```typescript
    const { uploadFiles, files } = useUploadRoute<AppRouter>('documentUpload', {
      onSuccess: (results) => {
        toast.success(`Uploaded ${results.length} files`)
        updateDocuments(results)
      },
      onError: (error) => {
        toast.error(`Upload failed: ${error.message}`)
      },
      onProgress: (progress) => {
        setGlobalProgress(progress.percentage)
      }
    })
    ```
  </Tab>
  
  <Tab value="Multiple Files">
    ```typescript
    const images = useUploadRoute<AppRouter>('imageUpload')
    const documents = useUploadRoute<AppRouter>('documentUpload')
    
    return (
      <div>
        <FileUploadSection {...images} accept="image/*" />
        <FileUploadSection {...documents} accept=".pdf,.doc" />
      </div>
    )
    ```
  </Tab>
  
  <Tab value="Form Integration">
    ```typescript
    const { uploadFiles, uploadedFiles } = useUploadRoute<AppRouter>('attachments', {
      onSuccess: (results) => {
        setValue('attachments', results.map(r => r.url))
      }
    })
    
    const onSubmit = (data) => {
      // Form data includes uploaded file URLs
      console.log(data.attachments)
    }
    ```
  </Tab>
</Tabs>

---

<Callout type="success">
  **Flexible API:** Use this hook when you prefer React's familiar hook patterns
  or need more granular control over upload state.
</Callout>
