---
title: createUploadClient
description: Create a type-safe upload client with enhanced property-based access
---

import { Callout } from "fumadocs-ui/components/callout";
import { TypeTable } from "fumadocs-ui/components/type-table";
import { Tab, Tabs } from "fumadocs-ui/components/tabs";

# createUploadClient

Creates a type-safe upload client that provides property-based access to your upload endpoints with full TypeScript inference.

<Callout type="success">
  **Recommended Approach**: This is the preferred way to handle uploads in your React components. It provides enhanced developer experience with property-based access and centralized configuration.
</Callout>

<Callout type="info">
  This utility function provides property-based access to your upload routes. You can also use the `useUploadRoute<AppRouter>()` hook if you prefer traditional React patterns.
</Callout>

## Benefits of This Approach

The structured client approach offers these advantages:

- **üéØ Type Safety**: Complete inference from server router to client
- **üîç IntelliSense**: See all available endpoints with autocomplete
- **üõ°Ô∏è Refactoring Safety**: Rename routes confidently across your codebase
- **üö´ No String Literals**: Property-based access eliminates typos
- **‚ö° Centralized Config**: Set up headers, timeouts, and options once

## Function Signature

```typescript
function createUploadClient<TRouter extends S3Router<any>>(
  config: ClientConfig
): InferClientRouter<TRouter>;
```

## Parameters

<TypeTable
  type={{
    endpoint: {
      description: "API endpoint URL for your upload router",
      type: "string",
      required: true,
    },
    fetcher: {
      description: "Custom fetch function (optional)",
      type: "(input: RequestInfo, init?: RequestInit) => Promise<Response>",
    },
  }}
/>

## Return Type

The function returns an upload client with property-based access to your router endpoints:

```typescript
type InferClientRouter<TRouter> = {
  readonly [K in keyof TRouter]: () => TypedRouteHook<TRouter, K>;
};

// Each route returns a hook factory function that provides:
interface TypedRouteHook {
  files: TypedUploadedFile[];
  uploadFiles: (files: File[], metadata?: any) => Promise<any[]>;
  reset: () => void;
  isUploading: boolean;
  errors: string[];
  routeName: string;
}
```

## Usage Examples

<Tabs items={["Basic", "Advanced", "With Authentication"]}>
  <Tab value="Basic">
    ```typescript
    import { createUploadClient } from 'pushduck/client'
    import type { AppRouter } from '@/lib/upload'

    export const upload = createUploadClient<AppRouter>({
      endpoint: '/api/upload'
    })

    // Property-based access with full type safety
    const { uploadFiles, files } = upload.imageUpload
    ```

  </Tab>
  
  <Tab value="Advanced">
    ```typescript
    export const upload = createUploadClient<AppRouter>({
      endpoint: '/api/upload',
      timeout: 60000,
      retries: 5,
      headers: {
        'X-Client-Version': '1.0.0'
      },
      onProgress: (progress) => {
        console.log(`Global progress: ${progress.percentage}%`)
      }
    })
    ```
  </Tab>
  
  <Tab value="With Authentication">
    ```typescript
    export const upload = createUploadClient<AppRouter>({
      endpoint: '/api/upload',
      headers: {
        'Authorization': `Bearer ${getAuthToken()}`
      },
      onError: (error) => {
        if (error.status === 401) {
          redirectToLogin()
        }
      }
    })
    ```
  </Tab>
</Tabs>

---

<Callout type="success">
  **Type Safety:** The client automatically infers all available endpoints from
  your router type, providing compile-time validation and autocomplete.
</Callout>{" "}
