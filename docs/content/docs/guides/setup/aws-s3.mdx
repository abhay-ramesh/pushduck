---
title: Using AWS S3
description: Set up AWS S3 for file uploads
---

# Using AWS S3

Set up AWS S3 to store your uploaded files securely.

## 1. Create an S3 Bucket

1. Go to the [AWS S3 Console](https://console.aws.amazon.com/s3/)
2. Click **"Create bucket"**
3. Choose a unique bucket name (e.g., `my-app-uploads`)
4. Select your preferred region
5. **Important**: Uncheck "Block all public access" if you want public file access
6. Click **"Create bucket"**

## 2. Set Up Permissions

### For Public Files (Images, Documents)

Add this bucket policy to allow public read access:

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::your-bucket-name/*"
    }
  ]
}
```

### For Private Files

Keep the default settings - files will only be accessible via presigned URLs.

## 3. Configure CORS

Add this CORS configuration to your bucket:

```json
[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
    "AllowedOrigins": ["http://localhost:3000", "https://yourdomain.com"],
    "ExposeHeaders": ["ETag"]
  }
]
```

## 4. Get Your Credentials

1. Go to [IAM Console](https://console.aws.amazon.com/iam/)
2. Create a new user with programmatic access
3. Attach the `AmazonS3FullAccess` policy (or create a custom policy)
4. Save your `Access Key ID` and `Secret Access Key`

## 5. Configure Your App

Add to your `.env.local`:

```bash
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET_NAME=your-bucket-name
```

## 6. Test Your Setup

Run the CLI test command:

```bash
npx create-next-s3-uploader test
```

This will verify your S3 connection and permissions.

## âœ… You're Ready!

Your AWS S3 is now configured. Head back to the [Quick Start](/quick-start) to start uploading files.

## ðŸ”’ Security Best Practices

- **Use IAM roles** instead of access keys when possible
- **Restrict bucket policies** to only necessary permissions
- **Enable versioning** for important files
- **Set up lifecycle policies** to manage costs

## ðŸ†˜ Common Issues

**CORS errors?** â†’ Make sure your domain is in the AllowedOrigins list
**Access denied?** â†’ Check your IAM user has S3 permissions
**Bucket not found?** â†’ Verify the bucket name in your environment variables

---

**Next:** [Upload Your First Image](/guides/uploads/images)
